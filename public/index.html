<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>실시간 설교 통역 - 청취자</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <!-- 헤더 -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <span class="logo-icon">🌐</span>
        <div class="logo-text">
          <h1>실시간 설교 통역</h1>
          <p>Live Translation Service</p>
        </div>
      </div>
      <div id="connectionStatus" class="status-badge" style="display: none;">
        <span class="status-dot"></span>
        <span>연결됨</span>
      </div>
    </div>
  </header>

  <!-- 메인 컨텐츠 -->
  <main class="container">
    <!-- 언어 선택 -->
    <div class="card" id="languageSelection">
      <h2 class="card-title">
        <span>🌍</span>
        언어를 선택하세요
      </h2>
      <div class="language-grid">
        <button class="language-btn" data-lang="ru" onclick="selectLanguage('ru')">
          <div class="flag">🇷🇺</div>
          <div class="name">Русский</div>
          <div class="code">러시아어</div>
        </button>
        <button class="language-btn" data-lang="zh" onclick="selectLanguage('zh')">
          <div class="flag">🇨🇳</div>
          <div class="name">中文</div>
          <div class="code">중국어</div>
        </button>
        <button class="language-btn" data-lang="vi" onclick="selectLanguage('vi')">
          <div class="flag">🇻🇳</div>
          <div class="name">Tiếng Việt</div>
          <div class="code">베트남어</div>
        </button>
        <button class="language-btn" data-lang="en" onclick="selectLanguage('en')">
          <div class="flag">🇺🇸</div>
          <div class="name">English</div>
          <div class="code">영어</div>
        </button>
      </div>
    </div>

    <!-- 플레이어 (언어 선택 후 표시) -->
    <div class="card" id="playerCard" style="display: none;">
      <h2 class="card-title">
        <span>🎧</span>
        <span id="selectedLanguageName">통역 듣기</span>
      </h2>
      <div class="player">
        <div class="player-controls">
          <button class="btn btn-primary" id="startBtn" onclick="startListening()">
            <span>▶</span>
            듣기 시작
          </button>
          <button class="btn btn-danger" id="stopBtn" onclick="stopListening()" style="display: none;">
            <span>⏸</span>
            일시정지
          </button>
          <button class="btn" onclick="changeLanguage()">
            <span>🔄</span>
            언어 변경
          </button>
        </div>

        <!-- 자막 영역 -->
        <div class="subtitle-container"
          style="background: var(--bg-darker); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;">
          <!-- 원어 (한국어) -->
          <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border);">
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
              <span
                style="background: #3b82f6; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">🇰🇷
                원어</span>
              <span id="sourceTime" style="color: var(--text-secondary); font-size: 0.75rem;"></span>
            </div>
            <div id="sourceText" class="subtitle-text"
              style="color: var(--text-secondary); font-size: 1rem; min-height: 1.5rem;">
              원어 자막이 여기에 표시됩니다
            </div>
          </div>

          <!-- 번역어 -->
          <div>
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
              <span id="targetLangBadge"
                style="background: #10b981; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">🌐
                번역</span>
              <span id="subtitleTime" class="subtitle-timestamp"
                style="color: var(--text-secondary); font-size: 0.75rem;"></span>
            </div>
            <div id="subtitle" class="subtitle-text"
              style="color: var(--text-primary); font-size: 1.25rem; font-weight: 500; min-height: 2rem;">
              번역된 자막이 여기에 표시됩니다
            </div>
          </div>
        </div>

        <!-- 통찰 질문 -->
        <div id="reflectionPrompt" class="reflection-prompt" style="display: none;">
          💭 이 말씀이 당신의 오늘에 어떤 의미입니까?
        </div>
      </div>
    </div>
  </main>

  <!-- 푸터 -->
  <footer class="footer">
    <p>&copy; 2026 A4K.ai | Powered by Gemini Multimodal Live API</p>
  </footer>

  <!-- Socket.IO -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/client.js"></script>
</body>

</html>