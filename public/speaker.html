<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>설교자 - 실시간 설교 통역</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">🎤</span>
                <div class="logo-text">
                    <h1>설교자 마이크</h1>
                    <p>Speaker Microphone</p>
                </div>
            </div>
            <div id="connectionStatus" class="status-badge" style="display: none;">
                <span class="status-dot"></span>
                <span>스트리밍 중</span>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="card">
            <h2 class="card-title">
                <span>🎙️</span>
                마이크 스트리밍
            </h2>

            <div class="player">
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem; text-align: center;">
                    마이크 버튼을 눌러 설교 음성 스트리밍을 시작하세요.<br>
                    음성은 자동으로 러시아어, 중국어, 베트남어, 영어로 통역됩니다.
                </p>

                <!-- 오디오 입력 장치 선택 -->
                <div style="margin-bottom: 1.5rem;">
                    <label for="audioInputSelect"
                        style="display: block; color: var(--text-secondary); margin-bottom: 0.5rem; text-align: center;">
                        🎚️ 오디오 입력 장치 선택
                    </label>
                    <select id="audioInputSelect"
                        style="width: 100%; padding: 0.75rem 1rem; border-radius: 8px; background: var(--bg-darker); border: 1px solid var(--border); color: var(--text-primary); font-size: 1rem; cursor: pointer;">
                        <option value="">기본 마이크</option>
                    </select>
                    <p
                        style="color: var(--text-secondary); font-size: 0.75rem; margin-top: 0.5rem; text-align: center;">
                        💡 믹서에서 오디오가 입력되는 장치를 선택하세요 (예: USB Audio, Line In)
                    </p>
                </div>

                <div class="player-controls">
                    <button class="btn btn-primary" id="startStreamBtn" onclick="startStreaming()">
                        <span>🎤</span>
                        스트리밍 시작
                    </button>
                    <button class="btn btn-danger" id="stopStreamBtn" onclick="stopStreaming()" style="display: none;">
                        <span>⏹</span>
                        스트리밍 중지
                    </button>
                </div>

                <!-- 오디오 레벨 표시 -->
                <div id="audioLevel" style="margin-top: 2rem; display: none;">
                    <div style="text-align: center; color: var(--text-secondary); margin-bottom: 0.5rem;">
                        음성 레벨
                    </div>
                    <div style="background: var(--bg-darker); height: 20px; border-radius: 10px; overflow: hidden;">
                        <div id="levelBar"
                            style="background: linear-gradient(90deg, var(--success), var(--primary)); height: 100%; width: 0%; transition: width 0.1s;">
                        </div>
                    </div>
                </div>

                <!-- 청취자 수 -->
                <div id="listenerCount" style="margin-top: 2rem; text-align: center; color: var(--text-secondary);">
                    대기 중...
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2026 A4K.ai | Powered by Gemini Multimodal Live API</p>
    </footer>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/speaker.js"></script>
</body>

</html>